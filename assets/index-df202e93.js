import{d as g,r,w as C,o as _,c as h,a as d,b as B,e as x,v as S,t as O,n as w,f as V,p as L,g as M,h as N,i as F,j as A,F as T,k as D,l as $,m as K,q as P}from"./@vue-04a3b903.js";import{n as I}from"./nanoid-7e542916.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();const W=s=>(L("data-v-3a7d8d32"),s=s(),M(),s),U={class:"bullet-form"},q=W(()=>d("div",null,[d("div",null,"当前有10个人在看, 已装填100个弹幕")],-1)),z={class:"setting-bullet"},E=["onKeyup"],j=g({__name:"index",props:{isHideBullet:{type:Boolean},speedBullet:null,offsetBullet:null},emits:["sendBullet","toggleHide","setSpeed","setOffset"],setup(s,{emit:o}){const l=s,n=r(""),e=r(l.isHideBullet),t=r(l.speedBullet),u=r(l.offsetBullet);function p(){n.value&&(o("sendBullet",n.value),n.value="")}function m(){e.value=!e.value,o("toggleHide",e.value)}return C(t,(f,i)=>{const a=+f;isNaN(a)||a<=0?t.value=+i:o("setSpeed",a)}),C(u,(f,i)=>{const a=+f;isNaN(a)||a<=0?u.value=+i:o("setOffset",a)}),(f,i)=>(_(),h("div",U,[q,d("div",z,[B(" 设置 "),d("div",null,[d("div",null,[B(" 弹幕速度ms "),x(d("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a)},null,512),[[S,t.value]])]),d("div",null,[B(" 弹幕的步长px "),x(d("input",{"onUpdate:modelValue":i[1]||(i[1]=a=>u.value=a)},null,512),[[S,u.value]])])])]),d("div",{onClick:m,class:w(`bullet-show-btn btn ${e.value?"hide":""}`)},O(e.value?"显示弹幕":"隐藏弹幕"),3),d("div",null,[x(d("input",{"onUpdate:modelValue":i[2]||(i[2]=a=>n.value=a),onKeyup:V(p,["enter"])},null,40,E),[[S,n.value]]),d("button",{onClick:p,class:"btn"},"发送")])]))}});const b=(s,o)=>{const l=s.__vccOpts||s;for(const[n,e]of o)l[n]=e;return l},R=b(j,[["__scopeId","data-v-3a7d8d32"]]);function y(s){return Math.round(Math.random()*s)}const G=g({__name:"index",props:{rootHeight:null,rootWidth:null,speed:null,offset:null,value:null,id:null,isCreated:{type:Boolean},isHide:{type:Boolean}},emits:["deleteBullet"],setup(s,{emit:o}){const l=s,n=r(0),e=r(0),t=r(null);let u=null;N(()=>{n.value=y(l.rootHeight-t.value.clientHeight),e.value=l.rootWidth,t.value.style.color=`rgb(${y(255)},${y(255)},${y(255)})`,p()});function p(){u=setInterval(()=>{e.value<=-t.value.clientWidth?(o("deleteBullet",l.id),clearInterval(u)):e.value-=l.offset},l.speed)}function m(){clearInterval(u)}return(f,i)=>(_(),h("span",{onMouseenter:m,onMouseleave:p,class:w(`bullet ${s.isCreated?"my-bullet":""}`),ref_key:"bullet",ref:t,style:F({top:n.value+"px",left:e.value+"px",display:s.isHide?"none":"inline-block"})},O(l.value),39))}});const J=b(G,[["__scopeId","data-v-1cc2008c"]]),Q=g({__name:"index",setup(s){const o=A([]),l=r(null),n=r(null),e=r(!1),t=r(2),u=r(50);function p(c){o.some((H,v,k)=>(H.id===c&&k.splice(v,1),!0))}function m(c){e.value=c}function f(c){o.push({value:c,id:I(5),isCreated:!0})}function i(c){u.value=c}function a(c){t.value=c}return N(()=>{setInterval(()=>{o.push({value:"测试弹幕",id:I(5),isCreated:!1})},2e3)}),(c,H)=>(_(),h("div",{class:"bullet-container",ref_key:"bulletContainer",ref:l},[(_(!0),h(T,null,D(o,v=>(_(),K(J,{onDeleteBullet:p,id:v.id,key:v.id,"is-created":v.isCreated,value:v.value,"root-height":l.value.clientHeight-n.value.$el.clientHeight,"root-width":l.value.clientWidth,speed:u.value,offset:t.value,"is-hide":e.value},null,8,["id","is-created","value","root-height","root-width","speed","offset","is-hide"]))),128)),$(R,{"is-hide-bullet":e.value,ref_key:"bulletForm",ref:n,onSetOffset:a,onSetSpeed:i,onSendBullet:f,onToggleHide:m,"speed-bullet":u.value,"offset-bullet":t.value},null,8,["is-hide-bullet","speed-bullet","offset-bullet"])],512))}});const X=b(Q,[["__scopeId","data-v-9bbdd2fb"]]),Y={class:"app"},Z=g({__name:"App",setup(s){return(o,l)=>(_(),h("div",Y,[$(X)]))}});const ee=b(Z,[["__scopeId","data-v-33a7209e"]]),te=P(ee);te.mount("#app");
